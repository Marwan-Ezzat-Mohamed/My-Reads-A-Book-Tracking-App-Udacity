(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(39)},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(21),c=a.n(o),s=a(5),l=a(6),i=a(8),u=a(7),h=a(9),p=a(0),d=a(3),f=a.n(d),m=a(13),b=a(12),k=a(11),v="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:y},O=function(){return fetch("".concat(v,"/books"),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.books})},j=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},g=function(e){return fetch("".concat(v,"/search"),{method:"POST",headers:Object(m.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onShelfUpdate;return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:"https://upload.wikimedia.org/wikipedia/en/6/60/No_Picture.jpg",")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:t.shelf,onChange:function(e){return a(t,e.target.value)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},t.title),t.authors&&t.authors.length>0?t.authors.map(function(e,t){return r.a.createElement("div",{key:t,className:"book-authors"},e)}):r.a.createElement("div",{className:"book-authors"},"no authors"))}}]),t}(n.Component),w=a(10),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={booksToDislplay:[],query:"",isBooksReady:!1},a.setBooksShelfs=Object(k.a)(f.a.mark(function e(){var t,n,r,o,c,s,l,i,u,h,p,d,k,v,y,E;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,n=Object(b.a)(a.state.booksToDislplay),r=[],o=!0,c=!1,s=void 0,e.prev=8,l=n[Symbol.iterator]();case 10:if(o=(i=l.next()).done){e.next=36;break}for(u=i.value,h=!1,p=!0,d=!1,k=void 0,e.prev=16,v=t[Symbol.iterator]();!(p=(y=v.next()).done);p=!0)(E=y.value).id===u.id&&(r.push(Object(m.a)({},u,{shelf:E.shelf})),h=1);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),d=!0,k=e.t0;case 24:e.prev=24,e.prev=25,p||null==v.return||v.return();case 27:if(e.prev=27,!d){e.next=30;break}throw k;case 30:return e.finish(27);case 31:return e.finish(24);case 32:h||r.push(Object(m.a)({},u,{shelf:"none"}));case 33:o=!0,e.next=10;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(8),c=!0,s=e.t1;case 42:e.prev=42,e.prev=43,o||null==l.return||l.return();case 45:if(e.prev=45,!c){e.next=48;break}throw s;case 48:return e.finish(45);case 49:return e.finish(42);case 50:a.setState({booksToDislplay:r,isBooksReady:!0});case 51:case"end":return e.stop()}},e,this,[[8,38,42,50],[16,20,24,32],[25,,27,31],[43,,45,49]])})),a.handleSearch=function(){var e=Object(k.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({query:t}),e.next=3,g(t);case 3:(n=e.sent)&&!n.error||(n=[]),a.setState({booksToDislplay:n,isBooksReady:!1});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleAddBook=function(){var e=Object(k.a)(f.a.mark(function e(t,n){var r,o,c,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.a)(a.state.booksToDislplay),o=Object(b.a)(a.state.booksToDislplay),c=o.indexOf(t),(s=o[c]).shelf=n,o[c]=s,a.setState({booksToDislplay:o}),e.prev=7,e.next=10,j(t,n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),a.setState({booksToDislplay:r});case 15:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.state.isBooksReady||this.setBooksShelfs()}},{key:"render",value:function(){var e=this,t=this.state,a=t.booksToDislplay;return t.query||(a=[]),r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(w.b,{to:"/"},r.a.createElement("button",{className:"close-search"})),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.handleSearch(t.target.value)}}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},a.length>=1?a.map(function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(S,{data:t,from:"searchPage",onShelfUpdate:e.handleAddBook}))}):r.a.createElement("p",null,"NO BOOKS FOUND"))))}}]),t}(n.Component),x=function(e){var t=e.name,a=e.data,n=e.onShelfUpdate;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},t),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},a.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(S,{data:e,onShelfUpdate:n}))}))))},B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={allBooks:[]},a.handleShelfUpdate=function(){var e=Object(k.a)(f.a.mark(function e(t,n){var r,o,c,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.a)(a.state.allBooks),o=Object(b.a)(a.state.allBooks),c=o.indexOf(t),(s=o[c]).shelf=n,o[c]=s,a.setState({allBooks:o}),e.prev=7,e.next=10,j(t,n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),a.setState({allBooks:r});case 15:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:t=e.sent,this.setState({allBooks:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({allBooks:[]});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.allBooks,a=[{name:"Read",shelfBooks:t.filter(function(e){return"read"===e.shelf})},{name:"Current Reading",shelfBooks:t.filter(function(e){return"currentlyReading"===e.shelf})},{name:"Want To Read",shelfBooks:t.filter(function(e){return"wantToRead"===e.shelf})}];return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,a.map(function(t,a){return r.a.createElement(x,{key:a,name:t.name,data:t.shelfBooks,onShelfUpdate:e.handleShelfUpdate})}))))}}]),t}(n.Component),T=function(){return r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement("div",{className:"open-search"},r.a.createElement(w.b,{to:"/search"},r.a.createElement("button",null,"Add a book"))))},R=(a(35),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showSearchPage:!1},a.handleShowingSearchPage=function(){a.setState({showSearchPage:!1})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/search",component:N}),r.a.createElement(p.b,{exact:!0,path:"/",component:T}),r.a.createElement(p.a,{to:"/"})))}}]),t}(n.Component));a(37);c.a.render(r.a.createElement(w.a,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.305e4fa4.chunk.js.map